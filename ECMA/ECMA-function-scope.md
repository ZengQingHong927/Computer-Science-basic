# 作用域

## 執行上下文

當函數被執行時，會創建一個執行上下文（execution context）的環境，分爲創建和執行兩個階段  

## 函數作用域

- 作用域鏈：當塊或函數嵌套在另一個函數或塊時，發生作用域嵌套，函數定義時確定作用域鏈，而函數在執行時，找不到的變量，會去函數定義時的作用域鏈上找，直到找到變量或全局作用域。  
- 闭包：是指有权访问另外一个函数作用域中的变量的函数。

```js
ex:
function demo () {
        // var 定義的變量i作用域在這裏
        for (var i = 0; i < 100; i++) {
                // let 定義的變量i作用域在這裏
                setTimeout(()=>{
                        console.log (i);        // var 打印出來的結果 100次100，let 打印出來的結果 1-100
                }, 1)
        }

        for(var i = 0; i < 10; i++) {
                (function(i){
                        setTimeout(function(){
                                console.log(i);
                        },0);  // var 打印出來的結果 100次100，let 打印出來的結果 1-10
                })(i);
        }
}
```
